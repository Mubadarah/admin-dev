import{u as w,r as u,e as g,j as e,T as N,I as d,B as p,h as m}from"./index-DuvEvaeK.js";import{p as T}from"./programs-DArSPDIF.js";function R({programId:f,program:t,onNext:r,onPrev:h}){const{t:i}=w(),n=u.useRef(null),[o,x]=u.useState(t==null?void 0:t.thumbnail),c=g({mutationFn:s=>T.update(f,{thumbnail:s}),onSuccess:s=>{m.success(i("common.success")),r(s)},onError:()=>{m.error(i("common.error"))}}),b=s=>{var a;const l=(a=s.target.files)==null?void 0:a[0];if(l){const y=URL.createObjectURL(l);x(y)}},j=()=>{var l,a;const s=(a=(l=n.current)==null?void 0:l.files)==null?void 0:a[0];s?c.mutate(s):(t!=null&&t.thumbnail,r(t))},v=()=>{var s;(s=n.current)==null||s.click()};return e.jsxs("div",{className:"space-y-6 flex flex-col items-center w-full",children:[e.jsx(N.Title,{level:4,children:i("app.programs.builder.steps.thumbnail")}),e.jsxs("div",{className:"relative w-48 h-48 border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center cursor-pointer overflow-hidden hover:border-primary transition-colors group",onClick:v,children:[o?e.jsx("img",{src:o,alt:"Thumbnail preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center text-gray-400 group-hover:text-primary",children:[e.jsx(d,{icon:"solar:camera-add-bold",size:48}),e.jsx("span",{className:"mt-2 text-sm font-medium",children:i("app.programs.builder.uploadThumbnail")})]}),o&&e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:e.jsx(d,{icon:"solar:pen-new-square-broken",size:32,className:"text-white"})})]}),e.jsx("input",{type:"file",ref:n,className:"hidden",accept:"image/*",onChange:b}),e.jsxs("div",{className:"flex justify-between w-full pt-4 max-w-md mx-auto",children:[e.jsx(p,{onClick:h,children:i("app.programs.builder.previous")}),e.jsx(p,{type:"primary",onClick:j,loading:c.isPending,children:i("app.programs.builder.next")})]})]})}export{R as default};
