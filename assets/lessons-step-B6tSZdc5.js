import{u as C,aR as v,b as L,e as T,j as e,T as d,B as i,I as a,S as N,c as k,h as S}from"./index-D30dUQcz.js";import{l as u}from"./lessons-bLwJnLKw.js";import q from"./lesson-form-modal-B2DpxORn.js";import{useLessonModal as M}from"./use-lesson-modal-uKANZiDh.js";import{L as c}from"./index-DRyEevkA.js";import{P as w}from"./index-DHdriWPD.js";import"./subjects-Bmu98KCm.js";import"./index-BijjHoeW.js";import"./Pagination-Mf8JmUTt.js";function D({subjectId:t,onNext:n,onPrev:p}){const{t:o}=C(),m=v(),{data:r,isLoading:x,refetch:l}=L({queryKey:["lessons",{subjectId:t}],queryFn:()=>u.get({subjectId:t}),enabled:!!t}),{modalProps:y,onCreate:j,onEdit:f}=M(()=>{m.invalidateQueries({queryKey:["lessons",{subjectId:t}]}),l()}),h=T({mutationFn:s=>u.destroy(s),onSuccess:()=>{S.success(o("common.deleted-successfully")),l()}}),b=()=>{j({subjectId:t})},g=s=>{switch(s){case"video":return"blue";case"pdf":return"orange";default:return"default"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(d.Title,{level:4,children:o("app.subjects.builder.steps.lessons")}),e.jsx(i,{type:"primary",onClick:b,icon:e.jsx(a,{icon:"solar:add-circle-broken"}),children:o("common.create")})]}),e.jsx(c,{loading:x,dataSource:r==null?void 0:r.items,renderItem:s=>e.jsx(c.Item,{actions:[e.jsx(B,{onClick:()=>f(s),children:e.jsx(a,{icon:"solar:pen-bold-duotone",size:18})},"edit"),e.jsx(w,{title:o("common.confirm-deleting"),onConfirm:()=>h.mutate(s.id),children:e.jsx("button",{type:"button",children:e.jsx(a,{icon:"mingcute:delete-2-fill",size:18,className:"text-error"})})},"delete")],children:e.jsx(c.Item.Meta,{title:s.title,description:e.jsxs(N,{children:[e.jsx(k,{color:g(s.type),children:o(`app.lessons.types.${s.type}`)}),e.jsx(d.Text,{type:"secondary",className:"text-xs",children:s.url})]})})})}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsx(i,{onClick:p,children:o("app.subjects.builder.previous")}),e.jsx(i,{type:"primary",onClick:n,children:o("app.subjects.builder.next")})]}),e.jsx(q,{...y})]})}function B({onClick:t,children:n}){return e.jsx("button",{type:"button",onClick:t,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:n})}export{D as default};
