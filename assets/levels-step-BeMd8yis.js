import{u as S,r as f,b as T,e as h,j as s,T as E,B as o,I as l}from"./index-D30dUQcz.js";import{a as c}from"./levels-DdrGcsNV.js";import w from"./level-form-modal-CsGM_Bsw.js";import{L as d}from"./index-DRyEevkA.js";import{s as y}from"./index-Bwj_JxLY.js";import"./dayjs.min-1Tz-y8oh.js";import"./programs-CIsHGAay.js";import"./index-BijjHoeW.js";import"./index-BMojJ2We.js";import"./index-CpcqnRPv.js";import"./Pagination-Mf8JmUTt.js";function Q({programId:i,onNext:b,onPrev:v}){var j;const{t}=S(),[u,a]=f.useState(!1),[r,p]=f.useState(null),{data:n,refetch:m,isLoading:g}=T({queryKey:["levels",{programId:i}],queryFn:()=>c.get({programId:i}),enabled:!!i}),M=h({mutationFn:e=>c.destroy(e),onSuccess:()=>{y.success(t("common.success")),m()}}),x=h({mutationFn:e=>e.id?c.update(e.id,e.data):c.create({...e.data,programId:i}),onSuccess:()=>{y.success(t("common.success")),a(!1),m()}}),k=()=>{p({programId:i}),a(!0)},L=e=>{p(e),a(!0)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(E.Title,{level:4,children:t("app.programs.builder.steps.levels")}),s.jsx(o,{type:"dashed",onClick:k,icon:s.jsx(l,{icon:"gridicons:add-outline"}),children:t("app.programs.builder.addLevel")})]}),s.jsx(d,{loading:g,dataSource:(n==null?void 0:n.items)||[],renderItem:e=>s.jsx(d.Item,{actions:[s.jsx(o,{type:"text",icon:s.jsx(l,{icon:"solar:pen-bold-duotone"}),onClick:()=>L(e)},"edit"),s.jsx(o,{type:"text",danger:!0,icon:s.jsx(l,{icon:"mingcute:delete-2-fill"}),onClick:()=>M.mutate(e.id)},"delete")],children:s.jsx(d.Item.Meta,{title:e.name,description:`${e.start} - ${e.end} `})}),locale:{emptyText:t("app.programs.builder.noLevels")}}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsx(o,{onClick:v,children:t("app.programs.builder.previous")}),s.jsx(o,{type:"primary",onClick:b,disabled:!((j=n==null?void 0:n.items)!=null&&j.length),children:t("app.programs.builder.next")})]}),u&&s.jsx(w,{title:r!=null&&r.id?t("common.edit"):t("common.create"),show:u,formValue:r||{},okDisabled:x.isPending,onOk:(e,C)=>x.mutate({id:e,data:C}),onCancel:()=>a(!1)})]})}export{Q as default};
