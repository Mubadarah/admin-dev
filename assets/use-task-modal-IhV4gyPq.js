import{l as d,e as p,r as y,p as u}from"./index-DuvEvaeK.js";import{a as f}from"./tasks-eh0bVn-g.js";function c(t){if(Array.isArray(t))return t.map(o=>c(o)).filter(o=>o!==void 0);if(typeof t=="object"&&t!==null){const o={};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="string"&&n==="")continue;if(typeof n=="object"&&n!==null){const s=c(n);o[r]=s}else o[r]=n}return o}return t}const l={date:"",lessonIds:[],assignmentId:""};function E(t){const[o]=d();l.levelId=o.get("levelId")??void 0;const r=p({mutationFn:e=>{const a=c(e.data);return e.id!==void 0?f.update(e.id,a):f.create(a)},onSuccess:()=>{s(e=>({...e,show:!1,okDisabled:!1})),t()},onError(e,a,i){console.log("onError",e,a,i),s(m=>({...m,okDisabled:!1}))}}),[n,s]=y.useState({formValue:{...l},title:u("common.create"),show:!1,okDisabled:!1,onOk:(e,a)=>{r.mutate({id:e,data:a}),s(i=>({...i,okDisabled:!0}))},onCancel:()=>{s(e=>({...e,show:!1}))}});return{modalProps:n,setModalProps:s,onCreate:e=>{s(a=>({...a,show:!0,...l,title:u("common.create"),formValue:{...l,parentId:(e==null?void 0:e.id)??""}}))},onEdit:e=>{s(a=>({...a,show:!0,title:u("common.edit"),formValue:e}))},mutation:r}}export{E as useTaskModal};
