import{aS as x,aT as F,aU as v,aV as P,aG as c,as as O,aW as j,r as b,ah as E,aX as M,aY as R,aL as G}from"./index-DuvEvaeK.js";let r=null,l=e=>e(),f=[],d={};function h(){const{getContainer:e,duration:s,rtl:a,maxCount:n,top:t}=d,o=(e==null?void 0:e())||document.body;return{getContainer:()=>o,duration:s,rtl:a,maxCount:n,top:t}}const w=c.forwardRef((e,s)=>{const{messageConfig:a,sync:n}=e,{getPrefixCls:t}=b.useContext(E),o=d.prefixCls||t("message"),u=b.useContext(M),[g,C]=R(Object.assign(Object.assign(Object.assign({},a),{prefixCls:o}),u.message));return c.useImperativeHandle(s,()=>{const i=Object.assign({},g);return Object.keys(i).forEach(m=>{i[m]=(...y)=>(n(),g[m].apply(g,y))}),{instance:i,sync:n}}),C}),I=c.forwardRef((e,s)=>{const[a,n]=c.useState(h),t=()=>{n(h)};c.useEffect(t,[]);const o=j(),u=o.getRootPrefixCls(),g=o.getIconPrefixCls(),C=o.getTheme(),i=c.createElement(w,{ref:s,sync:t,messageConfig:a});return c.createElement(O,{prefixCls:u,iconPrefixCls:g,theme:C},o.holderRender?o.holderRender(i):i)}),p=()=>{if(!r){const e=document.createDocumentFragment(),s={fragment:e};r=s,l(()=>{P()(c.createElement(I,{ref:n=>{const{instance:t,sync:o}=n||{};Promise.resolve().then(()=>{!s.instance&&t&&(s.instance=t,s.sync=o,p())})}}),e)});return}r.instance&&(f.forEach(e=>{const{type:s,skipped:a}=e;if(!a)switch(s){case"open":{l(()=>{const n=r.instance.open(Object.assign(Object.assign({},d),e.config));n==null||n.then(e.resolve),e.setCloseFn(n)});break}case"destroy":l(()=>{r==null||r.instance.destroy(e.key)});break;default:l(()=>{var n;const t=(n=r.instance)[s].apply(n,G(e.args));t==null||t.then(e.resolve),e.setCloseFn(t)})}}),f=[])};function _(e){d=Object.assign(Object.assign({},d),e),l(()=>{var s;(s=r==null?void 0:r.sync)===null||s===void 0||s.call(r)})}function S(e){const s=v(a=>{let n;const t={type:"open",config:e,resolve:a,setCloseFn:o=>{n=o}};return f.push(t),()=>{n?l(()=>{n()}):t.skipped=!0}});return p(),s}function k(e,s){const a=v(n=>{let t;const o={type:e,args:s,resolve:n,setCloseFn:u=>{t=u}};return f.push(o),()=>{t?l(()=>{t()}):o.skipped=!0}});return p(),a}const H=e=>{f.push({type:"destroy",key:e}),p()},W=["success","info","warning","error","loading"],A={open:S,destroy:H,config:_,useMessage:F,_InternalPanelDoNotUseOrYouWillBeFired:x},D=A;W.forEach(e=>{D[e]=(...s)=>k(e,s)});export{D as s};
