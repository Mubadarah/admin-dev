import{u as x,F as t,b as f,r as h,e as y,j as r,g as m,B as g,h as l}from"./index-D30dUQcz.js";import{p as F}from"./programs-CIsHGAay.js";import{a as p}from"./subjects-Bmu98KCm.js";import{S as j}from"./index-BijjHoeW.js";function w({subject:s,onSuccess:u}){const{t:a}=x(),[o]=t.useForm(),{data:i}=f({queryKey:["programs"],queryFn:()=>F.get()}),d=(i==null?void 0:i.items.map(e=>({value:e.id,label:e.name})))||[];h.useEffect(()=>{s&&o.setFieldsValue(s)},[s,o]);const n=y({mutationFn:e=>s!=null&&s.id?p.update(s.id,e):p.create(e),onSuccess:e=>{l.success(a("common.success")),u(e.data||e)},onError:()=>{l.error(a("common.error"))}}),c=e=>{n.mutate(e)};return r.jsxs(t,{form:o,layout:"vertical",onFinish:c,className:"max-w-2xl mx-auto",children:[r.jsx(t.Item,{label:a("app.fields.program"),name:"programId",rules:[{required:!0}],children:r.jsx(j,{options:d,showSearch:!0,optionFilterProp:"label"})}),r.jsx(t.Item,{label:a("app.fields.name"),name:"name",rules:[{required:!0}],children:r.jsx(m,{})}),r.jsx(t.Item,{label:a("app.fields.description"),name:"description",rules:[{required:!0}],children:r.jsx(m.TextArea,{rows:4})}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx(g,{type:"primary",htmlType:"submit",loading:n.isPending,children:a("app.subjects.builder.steps.lessons")})})]})}export{w as default};
